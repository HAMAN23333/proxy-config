parsers: # array
  # - reg: ^.*$ åŒ¹é…æ‰€æœ‰è®¢é˜…ï¼Œæˆ–  - url: https://example.com/profile.yaml æŒ‡å®šè®¢é˜…
  - reg: ^.*$
  # åˆ é™¤æœåŠ¡å•†æä¾›çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const proxies = yaml.parse(raw).proxies
        return yaml.stringify({ 'proxies': proxies })
      } 
  # å»ºç«‹è‡ªå·±çš„é…ç½®
    yaml:
      prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„

        - name: ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
          type: select

        - name: ğŸ Apple
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: ğŸ’» Microsoft
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: ğŸ¤– Google
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 

        - name: ğŸ•¹ï¸ Game
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: âœˆï¸ Telegram
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 

        - name: ğŸ“º BiliBili
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: âš¡ ä¸‹è½½
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: ğŸ“° å›½å†…ç½‘ç«™
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
          type: select
          proxies:
            - ğŸ”° é€‰æ‹©èŠ‚ç‚¹ 
            - DIRECT

        - name: ğŸ‡­ğŸ‡° é¦™æ¸¯
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡ºğŸ‡² ç¾å›½
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡©ğŸ‡ª å¾·å›½
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡¬ğŸ‡§ è‹±å›½
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT

        - name: ğŸ‡¦ğŸ‡º æ¾³æ´²
          type: fallback
          url: http://www.gstatic.com/generate_204
          interval: 86400
          proxies:
            - REJECT
            
  # ç­–ç•¥ç»„ç¤ºä¾‹
       # - name: åˆ†ç»„å
         # type: select       # æ‰‹åŠ¨é€‰ç‚¹   
               # url-test     # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
               # fallback     # èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª
               # laod-balance # å‡è¡¡ä½¿ç”¨åˆ†ç»„å†…çš„èŠ‚ç‚¹
         # url: http://www.gstatic.com/generate_204 # æµ‹è¯•åœ°å€ éselectç±»å‹åˆ†ç»„å¿…è¦
         # interval: 300 # è‡ªåŠ¨æµ‹è¯•é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ éselectç±»å‹åˆ†ç»„å¿…è¦
         # tolerance: 50 # å…è®¸çš„åå·®ï¼ŒèŠ‚ç‚¹ä¹‹é—´å»¶è¿Ÿå·®å°äºè¯¥å€¼ä¸åˆ‡æ¢ éå¿…è¦
         # proxies:  
           # - èŠ‚ç‚¹åç§°æˆ–å…¶ä»–åˆ†ç»„å¥—å¨ƒ
          
      commands:
        - proxy-groups.ğŸ‡­ğŸ‡° é¦™æ¸¯.proxies.0+[]proxyNames|^(.*)(æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°)+(.*)$
        - proxy-groups.ğŸ‡¹ğŸ‡¼ å°æ¹¾.proxies.0+[]proxyNames|^(.*)(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan|ğŸ‡¹ğŸ‡¼)+(.*)$
        - proxy-groups.ğŸ‡¯ğŸ‡µ æ—¥æœ¬.proxies.0+[]proxyNames|^(.*)(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan|ğŸ‡¯ğŸ‡µ)+(.*)$
        - proxy-groups.ğŸ‡ºğŸ‡² ç¾å›½.proxies.0+[]proxyNames|^(.*)(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|ğŸ‡ºğŸ‡²)+(.*)$
        - proxy-groups.ğŸ‡¸ğŸ‡¬ ç‹®åŸ.proxies.0+[]proxyNames|^(.*)(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬)+(.*)$
        - proxy-groups.ğŸ‡©ğŸ‡ª å¾·å›½.proxies.0+[]proxyNames|^(.*)(å¾·|Germany|DE|æŸæ—|æ…•å°¼é»‘|ğŸ‡©ğŸ‡ª)+(.*)$
        - proxy-groups.ğŸ‡¬ğŸ‡§ è‹±å›½.proxies.0+[]proxyNames|^(.*)(è‹±|Britain|ä¼¦æ•¦|ğŸ‡¬ğŸ‡§)+(.*)$
        - proxy-groups.ğŸ‡¦ğŸ‡º æ¾³æ´².proxies.0+[]proxyNames|^(.*)(æ¾³|Australia|AU|å¢¨å°”æœ¬|æ‚‰å°¼|ğŸ‡¦ğŸ‡º)+(.*)$
        
        - proxy-groups.ğŸ”° é€‰æ‹©èŠ‚ç‚¹.proxies=[]proxyNames # å‘æŒ‡å®šç­–ç•¥ç»„æ·»åŠ è®¢é˜…ä¸­çš„èŠ‚ç‚¹åï¼Œå¯ä½¿ç”¨æ­£åˆ™è¿‡æ»¤
        - proxy-groups.ğŸ”° é€‰æ‹©èŠ‚ç‚¹.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ Apple.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ’» Microsoft.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ¤– Google.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ•¹ï¸ Game.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.âœˆï¸ Telegram.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ“º BiliBili.proxies.0+[]groupNames|^(.*)(æ¸¯|å°)+(.*)$
        - proxy-groups.âš¡ ä¸‹è½½.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        - proxy-groups.ğŸ“° å›½å†…ç½‘ç«™.proxies.0+[]groupNames|^(.*)(æ¸¯|å¾·|æ—¥|ç¾|å°|ç‹®|è‹±|æ¾³)+(.*)$
        # - proxy-groups.ğŸ”° é€‰æ‹©èŠ‚ç‚¹.proxies.0+DIRECT # å‘æŒ‡å®šåˆ†ç»„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ ä¸€ä¸ª DIRECT èŠ‚ç‚¹å
        
        # ä¸€äº›å¯èƒ½ç”¨åˆ°çš„æ­£åˆ™è¿‡æ»¤èŠ‚ç‚¹ç¤ºä¾‹ï¼Œä½¿åˆ†ç»„æ›´ç»†è‡´
        # []proxyNames|a                         # åŒ…å«a
        # []proxyNames|^(.*)(a|b)+(.*)$          # åŒ…å«aæˆ–b
        # []proxyNames|^(?=.*a)(?=.*b).*$        # åŒ…å«aå’Œb
        # []proxyNames|^((?!b).)*a((?!b).)*$     # åŒ…å«aä¸”ä¸åŒ…å«b
        # []proxyNames|^((?!b|c).)*a((?!b|c).)*$ # åŒ…å«aä¸”ä¸åŒ…å«bæˆ–c
        
  # æ·»åŠ è§„åˆ™
      prepend-rules: # è§„åˆ™ç”±ä¸Šå¾€ä¸‹éå†ï¼Œå¦‚ä¸Šé¢è§„åˆ™å·²ç»å‘½ä¸­ï¼Œåˆ™ä¸å†å¾€ä¸‹å¤„ç†
        - DOMAIN,clash.razord.top,DIRECT
        - DOMAIN,yacd.haishan.me,DIRECT
        - RULE-SET,Lan,DIRECT
        - if: (not(match_provider("Direct"))) and (match_provider("Advertising") or match_provider("Advertising_Domain")) # é€»è¾‘åˆ¤æ–­ï¼Œéœ€è¦æ–°ç‰ˆæœ¬clash premium 2023.5.19ç‰ˆæœ¬ä»¥ä¸Šå†…æ ¸çš„æ”¯æŒ
          name: AD
          rules: 
            - MATCH,REJECT
        - RULE-SET,Download,âš¡ ä¸‹è½½
        - RULE-SET,PrivateTracker,âš¡ ä¸‹è½½
        - RULE-SET,Game,ğŸ•¹ï¸ Game
        - RULE-SET,GitHub,ğŸ’» Microsoft
        - RULE-SET,Microsoft,ğŸ’» Microsoft
        - RULE-SET,YouTube,ğŸ¤– Google
        - RULE-SET,Google,ğŸ¤– Google
        - RULE-SET,Telegram,âœˆï¸ Telegram
        - RULE-SET,Apple,ğŸ Apple
        - RULE-SET,Apple_Domain,ğŸ Apple
        - RULE-SET,BiliBili,ğŸ“º BiliBili
        - RULE-SET,Bahamut,ğŸ‡¹ğŸ‡¼ å°æ¹¾
        - RULE-SET,ChinaMax,ğŸ“° å›½å†…ç½‘ç«™
        - RULE-SET,ChinaMax_IP,ğŸ“° å›½å†…ç½‘ç«™
        - RULE-SET,ChinaMax_Domain,ğŸ“° å›½å†…ç½‘ç«™
        - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼ # è§„åˆ™ä¹‹å¤–çš„
  # æ·»åŠ è§„åˆ™é›†
      mix-rule-providers: 

        Direct: # å¹¿å‘Šæ”¾è¡Œ
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Direct/Direct.yaml"
          interval: 86400
          path: ./ruleset/Direct.yaml  

        Advertising_Domain:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Advertising/Advertising_Domain.yaml"
          interval: 86400
          path: ./ruleset/Advertising_Domain.yaml 

        Advertising:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Advertising/Advertising.yaml"
          interval: 86400
          path: ./ruleset/Advertising.yaml        

        GitHub:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml"
          interval: 86400
          path: ./ruleset/GitHub.yaml

        Microsoft:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
          interval: 86400
          path: ./ruleset/Microsoft.yaml
        
        Apple_Domain:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Apple/Apple_Domain.yaml"
          interval: 86400
          path: ./ruleset/Apple_Domain.yaml

        Apple:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Apple/Apple.yaml"
          interval: 86400
          path: ./ruleset/Apple.yaml

        Game:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Game/Game.yaml"
          interval: 86400
          path: ./ruleset/Game.yaml

        BiliBili:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml"
          interval: 86400
          path: ./ruleset/BiliBili.yaml
        
        YouTube:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
          interval: 86400
          path: ./ruleset/YouTube.yaml

        Google:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Google/Google.yaml"
          interval: 86400
          path: ./ruleset/Google.yaml
          
        Bahamut:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Bahamut/Bahamut.yaml"
          interval: 86400
          path: ./ruleset/Bahamut.yaml

        Telegram:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
          interval: 86400
          path: ./ruleset/Telegram.yaml
          
        ChinaMax_Domain: # ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_Domain.yaml"
          path: ./ruleset/ChinaMax_Domain.yaml
          interval: 86400

        ChinaMax_IP: # ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
          type: http
          behavior: ipcidr
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_IP.yaml"
          path: ./ruleset/ChinaMax_IP.yaml
          interval: 86400

        ChinaMax: # ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax.yaml"
          path: ./ruleset/ChinaMax.yaml
          interval: 86400

        Lan: 
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Lan/Lan.yaml"
          path: ./ruleset/Lan.yaml
          interval: 86400

        Download: 
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/Download/Download.yaml"
          path: ./ruleset/Download.yaml
          interval: 86400

        PrivateTracker: 
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/HAMAN23333/ios_rule_script@master/rule/Clash/PrivateTracker/PrivateTracker.yaml"
          path: ./ruleset/PrivateTracker.yaml
          interval: 86400
